{% extends "base.html" %}


{% block body %}
    <div class="container">
        <div class="mb-4">
            <div class="mb-4">
                <h1 class="display-1">{{title}}</h1>
                <h6 class="display-6">By <a class="link" href="/profile/{{author_hashed_token}}" class="display-6">{{author_username}}</a></h6>
            </div>
            <zero-md no-shadow>
                <script type="text/markdown">{{content}}</script>
            </zero-md>
        </div>
        <div class="card text-center mb-4">
            <div class="card-header">
                Description
            </div>
            <div class="card-body">
                <zero-md>
                    <script type="text/markdown">{{context}}</script>    
                </zero-md>
            </div>
            <div class="card-footer text-muted">
                {{date}}
            </div>
        </div>
        <div class="row mb-4">
            <div class="col">
                <button type="submit" name = "like" value = 1 class="btn btn-outline-primary me-2">Likes : {{likes}}</button>
            </div>
            <div class="col">
                <button type="submit" name = "like" value = 1 class="btn btn-outline-primary me-2">Dislikes: {{dislikes}}</button>
            </div>
            <div class="col">
                <button class="btn btn-primary">Report</button>
            </div>
            <div class="col">
                <button
                    class="btn btn-outline-primary dropdown-toggle"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                >Options</button>
                <ul class="dropdown-menu">
                    {% if is_user_author %}
                        <li><a href="/modify-cheat-sheet/{{cheat_sheet_token}}" class="dropdown-item">Edit</a></li>
                    {% endif %}
                    <li><a href="#" class="dropdown-item">Save cheat sheet</a></li>
                </ul>
            </div>
        </div>
        {% if logged_in %}
            <form action="/cheat-sheet/{{cheat_sheet_token}}" method="post">
                <div class="form-group">
                    <label for="comment-input">Comment</label>
                    <textarea id="comment-input" name="comment_input" class="form-control"></textarea>
                </div>
                <button type="submit" class="btn btn-primary mb-4">Add comment</button>
            </form>
        {% endif %}
        <div class="card">
            <div class="card-header ml-2">Comments</div>
            {% for comment in comments %}
                <span>
                    <a class="link" href="/profile/{{comment['id']}}">{{comment["username"]}}</a>
                    <br>
                    {{comment["content"]}}
                </span>
                <div class="panel panel-info"></div>
            {% endfor %}
        </div>
    </div>
{% endblock %}